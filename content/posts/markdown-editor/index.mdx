---
title: Designing A Better Markdown Editor
date: 2020-06-17
path: /markdown-editor/
published: false
description: ''
---

[Markdown](https://en.wikipedia.org/wiki/Markdown) makes writing on the web simple. It allows me to write and format in plain text so I can keep my hands on the keyboard and away from the mouse.

In theory, I could write, edit, and publish a post without ever looking at a preview — let alone the generated HTML. Instead, my workflow looks something like this:

1. Write in Vim.
2. Preview in Firefox.
3. Switch back to Vim for revisions.
4. Repeat until done.
5. Commit changes and push to [GitHub](https://github.com/tmm/www).

It's clear that Vim is the wrong tool for the job. It's great for editing text, but doesn't support previewing Markdown. It forces me to either "render" a preview in my head or switch between a browser.

Let's take a look at some different types of Markdown editors and see if any of them are better at editing and previewing.

#### Split-pane

Split-pane editors, like [Dillinger](https://dillinger.io), divide the window into two panes. One pane lets you edit text and the other displays a live preview.

[Video]

Clunky! Split-pane editors duplicate content on the screen and shift your focus away from your cursor. Not much better than tabbing between Vim and Firefox like I currently do.

#### Block preview

Block preview editors, like [Roam Research](https://roamresearch.com/), add preview to the editor on a block-by-block basis. When you are editing a Markdown [block](https://daringfireball.net/projects/markdown/syntax#block), it is displayed as plain text. As soon as the block loses focus, it is compiled into a preview.

[Video]

This is a better than split-pane editors in that you don't need to look elsewhere to see a preview. Writing and preview happen in the same document. The downside is that you cannot see the preview in real time.

#### Inline preview

Inline preview editors, like [iA Writer](https://ia.net/writer), add block and inline syntax preview to the editor as you type: \*emphasis\* becomes _\*emphasis\*_, headings look heavier, list items maintain their indent across lines, etc.

[Video]

This is the best so far. (In fact, we could stop here since iA Writer is a fantastic piece of software.) But it's not perfect: Showing syntax and preview at the same time is redundant and diverges from the final "HTML" view.

#### WYSIWYG

[WYSIWYG](https://en.wikipedia.org/wiki/WYSIWYG) editors aren't really Markdown editors, but they are worth talking about. Editors, like [Dropbox Paper](https://www.dropbox.com/paper), support Markdown on input, but strip syntax characters once they transform them to their semantic meaning.

[Video]

It's worth noting that despite stripping characters (which is really bad), WYSIWYG editors handle preview the best because you are writing in rich text, the language of previews.

***

Okay, none of these do exactly what I want. Some of them come close and are decent editors, but none break the wall between editing and previewing.

There are two important principles partially or fully missing: 1) Previews should happen inline, and 2) Syntax should show up when you need it to and disappear when you don't. Kind of like this:

[Video]

The above video is a recording of a no-frills editor I hacked up to experiment with these two principles. (I'll save implementation details for a future post.[^1])

As I type and move around the editor, previews occur in real time and syntax surfaces based on the cursor/selection. In the same document, I can ==read in rich text and write in plain text== without needing to specify a [mode](https://en.wikipedia.org/wiki/Mode_(user_interface)) or do much of anything!

If you are unsure why "rich reading, plain writing" is better than editors that already do block or inline previews consider the following scenario: A large paragraph with a few links scattered
throughout.

Block previews only work when a block is inactive so switching between a focused and blurred state causes the link syntax to reflow the text as it is shown and hidden. This makes it complex to perform selections and focus your eyes on the text.

[Video]

Inline previews don't hide syntax so URLs and other syntax create dead space between words. This makes is difficult to naturally read text when editing or revising. You are forced to halt reading while your eyes traverse syntax.

[Video]

A large paragraph with links is a dramatic example, but when using Markdown it's almost guaranteed the plain text representation will not look like the preview. Old markdown editors are stuck with showing either too much or not enough information — or at least most are.

When doing [research](https://www.are.na/tmm/mizaru), I found two editors that already implemented a form of RRPW.

#### Typora

[Typora](https://typora.io) bills itself as a "new way to read and write markdown" through its [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) interface. It doesn't perfectly capture the nature of RRPW though since math blocks and diagrams have separate editing and preview areas in the document.[^2]

#### HyperMD

[HyperMD](https://github.com/laobubu/HyperMD)

One of the founders of [Obsidian](https://obsidian.md), a buzzy split-pane editor, [asked on the CodeMirror Forum](https://discuss.codemirror.net/t/implementing-wysiwyg-markdown-editor-in-codemirror/2403) how they could do something similar to HyperMD.

***

Even though Typora and HyperMD exist, there's still room for improvement.

There is at least one tricky caveat with RRPW: [Whitespace](https://en.wikipedia.org/wiki/Whitespace_character). Markdown is used to generate HTML, which collapses whitespace by default. In plain text, you can add any number of spaces (leading and trailing), carriage returns, etc. though.

[^1]:
    It's built on top of [ProseMirror](https://prosemirror.net), a "toolkit for building rich-text editors," so it supports history, collaboration, etc. with little fuss.

    Email me (tom@meagher.co) if you want to chat more.

[^2]: Math blocks and diagrams are not part of [GitHub Flavored Markdown](https://github.github.com/gfm/) or [CommonMark](https://spec.commonmark.org/0.29/).
